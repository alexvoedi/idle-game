import{o as S,e as R,f,g as K,G as F,i as y,w as D,n as G,v as q}from"./vendor.1817a090.js";import{_ as Q}from"./BaseCard.3f2a93d3.js";import{f as ee,p as te}from"./index.0547fd74.js";const ne={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},re=f("path",{fill:"currentColor",d:"m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2Z"},null,-1),ae=[re];function oe(e,n){return S(),R("svg",ne,ae)}var ce={name:"mdi-import",render:oe};const ie={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},se=f("path",{fill:"currentColor",d:"m23 12l-4-4v3h-9v2h9v3M1 18V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3h-2V6H3v12h12v-3h2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2Z"},null,-1),ue=[se];function le(e,n){return S(),R("svg",ie,ue)}var fe={name:"mdi-export",render:le};function p(e){return Object.prototype.toString.call(e)==="[object Array]"}function j(e,n){if(!e)throw new Error(n)}function k(e){return Object.keys(e)}function x(e){return Object.keys(e).map(function(n){return[n,e[n]]})}function h(e,n,r){var t="."+n,a=new RegExp("(\\".concat(n,")?$"));return r(e).replace(a,t)}function de(e){return"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),e.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")}function pe(e){return Array(e+1).join(" ")}function ve(e){return e.replace(/([<>&])/g,function(n,r){switch(r){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}})}function me(e,n,r){switch(n){case"txt":{var t="text/plain;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"css":{var t="text/css;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"html":{var t="text/html;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"json":{var t="text/json;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"csv":{var t="text/csv;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"xls":{var t="text/application/vnd.ms-excel;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"xml":{var t="text/application/xml;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}default:return""}}function J(e,n,r,t){r===void 0&&(r="download"),t===void 0&&(t=!0);var a=me(e,n,t),c=document.createElement("a");c.href=a,c.download=r,c.setAttribute("style","visibility:hidden"),document.body.appendChild(c),c.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(c)}var w=globalThis&&globalThis.__assign||function(){return w=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w.apply(this,arguments)},b=globalThis&&globalThis.__read||function(e,n){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),a,c=[],u;try{for(;(n===void 0||n-- >0)&&!(a=t.next()).done;)c.push(a.value)}catch(s){u={error:s}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(u)throw u.error}}return c};function he(e){if(!e||p(e)&&!e.length||!p(e)&&!k(e).length)return function(r){return r};var n=p(e)?e.reduce(function(r,t){var a;return w(w({},r),(a={},a[t]=t,a))},Object.create(null)):e;return function(r){return p(r)?r.map(function(t){return x(t).reduce(function(a,c){var u=b(c,2),s=u[0],o=u[1];return s in n&&(a[n[s]]=o),a},Object.create(null))}).filter(function(t){return k(t).length}):x(r).reduce(function(t,a){var c=b(a,2),u=c[0],s=c[1];return u in n&&(t[n[u]]=s),t},Object.create(null))}}function _e(e){var n="Invalid export data. Please provide a valid JSON";try{return typeof e=="string"?JSON.parse(e):e}catch{throw new Error(n)}}function xe(e,n,r){n===void 0&&(n=null);var t="Invalid export data. Please provide valid JSON object";try{return JSON.stringify(e,n,r)}catch{throw new Error(t)}}function H(e){return e.map(x).reduce(function(n,r,t){return r.reduce(function(a,c){var u=b(c,2),s=u[0],o=u[1],i=a[s]||Array.from({length:e.length}).map(function(l){return""});return i[t]=(typeof o!="string"?JSON.stringify(o):o)||"",a[s]=i,a},n)},Object.create(null))}function $(e,n){return n===void 0&&(n=function(r){return r}),n(x(e).map(function(r){var t=b(r,2),a=t[0],c=t[1];return{fieldName:a,fieldValues:c}}))}function be(e,n,r){if(n===void 0&&(n=","),r===void 0&&(r=function(o){return o}),!e.length)return"";var t=H(e),a=$(t,r),c=a.map(function(o){var i=o.fieldName;return i}).join(n)+`\r
`,u=a.map(function(o){var i=o.fieldValues;return i}).map(function(o){return o.map(function(i){return'"'.concat(i.replace(/\"/g,'""'),'"')})}),s=u.reduce(function(o,i){return o.map(function(l,d){return"".concat(l).concat(n).concat(i[d])})});return c+s.join(`\r
`)}function ye(e,n){j(e.length>0);var r=H(e),t=$(r,n),a=t.map(function(s){var o=s.fieldName;return o}).join("</b></th><th><b>"),c=t.map(function(s){var o=s.fieldValues;return o}).map(function(s){return s.map(function(o){return"<td>".concat(o,"</td>")})}),u=c.reduce(function(s,o){return s.map(function(i,l){return"".concat(i).concat(o[l])})});return`
    <table>
      <thead>
        <tr><th><b>`.concat(a,`</b></th></tr>
      </thead>
      <tbody>
        <tr>`).concat(u.join(`</tr>
        <tr>`),`</tr>
      </tbody>
    </table>
  `)}function we(e,n){if(n===void 0&&(n=function(t){return t}),!e.length)return"";var r=`<html>
  <head>
    <meta charset="UTF-8" />
  </head >
  <body>
    `.concat(ye(e,n),`
  </body>
</html >
`);return r}function ge(e){var n=`<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>
`.concat(O(e,"base"),`
`);return n}function O(e,n,r,t){r===void 0&&(r="element"),t===void 0&&(t=0);var a=de(n),c=pe(t);if(e==null)return"".concat(c,"<").concat(a," />");var u=p(e)?e.map(function(o){return O(o,r,r,t+2)}).join(`
`):typeof e=="object"?x(e).map(function(o){var i=b(o,2),l=i[0],d=i[1];return O(d,l,r,t+2)}).join(`
`):c+"  "+ve(String(e)),s="".concat(c,"<").concat(a,`>
`).concat(u,`
`).concat(c,"</").concat(a,">");return s}var je={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"};function N(e){var n=e.data,r=e.fileName,t=r===void 0?"download":r,a=e.extension,c=e.fileNameFormatter,u=c===void 0?function(g){return g.replace(/\s+/,"_")}:c,s=e.fields,o=e.exportType,i=o===void 0?"txt":o,l=e.replacer,d=l===void 0?null:l,L=e.space,B=L===void 0?4:L,U=e.processor,v=U===void 0?J:U,I=e.withBOM,P=I===void 0?!1:I,E=e.delimiter,Y=E===void 0?",":E,A=e.beforeTableEncode,M=A===void 0?function(g){return g}:A,C="Invalid export data. Please provide an array of objects",X="Can't export unknown data type ".concat(i,"."),z="Can't export string data to ".concat(i,".");if(typeof n=="string")switch(i){case"txt":case"css":case"html":return v(n,i,h(t,a!=null?a:i,u));default:throw new Error(z)}var W=he(s),m=W(_e(n)),T=xe(m,d,B);switch(i){case"txt":case"css":case"html":return v(T,i,h(t,a!=null?a:i,u));case"json":return v(T,i,h(t,a!=null?a:"json",u));case"csv":{j(p(m),C);var Z="\uFEFF",V=be(m,Y,M),_=P?Z+V:V;return v(_,i,h(t,a!=null?a:"csv",u))}case"xls":{j(p(m),C);var _=we(m,M);return v(_,i,h(t,a!=null?a:"xls",u))}case"xml":{var _=ge(m);return v(_,i,h(t,a!=null?a:"xml",u))}default:throw new Error(X)}}N.types=je;N.processors={downloadFile:J};const Oe={class:"space-y-8"},Se=f("h1",{class:"text-2xl"},"Game",-1),Re={class:"flex gap-8"},Ne=f("h2",{class:"text-xl"},"Export Game",-1),Le=G(" Export "),Ue=f("h2",{class:"text-xl"},"Import Game",-1),Ie=["disabled"],Ee=G(" Import "),Te=K({setup(e){const n=()=>{const s=q(te.state.value);N({data:s,fileName:`save-${Date.now()}.json`,exportType:"json"})},r=ee(),t=F(),a=F(),c=s=>{const o=s.target;o.files&&(t.value=o.files[0])},u=()=>{if(!confirm("Your current save game will be overwritten. Are you sure you want to load this save game?"))return;const o=new FileReader;o.onload=i=>{const{target:l}=i;if(l==null?void 0:l.result){const d=JSON.parse(l.result.toString());r.loadGame(d),a.value&&a.value.reset()}},o.readAsText(t.value)};return(s,o)=>{const i=fe,l=Q,d=ce;return S(),R("div",Oe,[Se,f("div",Re,[y(l,{class:"px-8 py-6 space-y-6"},{default:D(()=>[Ne,f("button",{onClick:n,class:"flex justify-center items-center gap-2"},[y(i),Le])]),_:1}),y(l,{class:"px-8 py-6 space-y-6"},{default:D(()=>[Ue,f("form",{ref_key:"fileInputForm",ref:a,class:"space-y-4",action:""},[f("input",{type:"file",onChange:c,accept:"application/JSON",ref:"fileUpload"},null,544),f("button",{disabled:!t.value,onClick:u,class:"flex justify-center items-center gap-2 disabled:opacity-40"},[y(d),Ee],8,Ie)],512)]),_:1})])])}}});export{Te as default};
