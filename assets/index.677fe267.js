import{o as j,e as O,f as u,g as G,D as F,C as Q,G as k,i as v,w as m,u as ee,n as J,v as te}from"./vendor.1817a090.js";import{_ as ne}from"./BaseCard.1a684b2d.js";import{f as re,g as ae,p as oe}from"./index.598be4cc.js";const ie={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ce=u("path",{fill:"currentColor",d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z"},null,-1),le=[ce];function se(e,n){return j(),O("svg",ie,le)}var ue={name:"mdi-delete",render:se};const de={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},fe=u("path",{fill:"currentColor",d:"m14 12l-4-4v3H2v2h8v3m10 2V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3h2V6h12v12H6v-3H4v3a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2Z"},null,-1),ve=[fe];function me(e,n){return j(),O("svg",de,ve)}var he={name:"mdi-import",render:me};const pe=["disabled"],xe=G({props:{outlined:{type:Boolean},primary:{type:Boolean},filled:{type:Boolean},warning:{type:Boolean},error:{type:Boolean},disabled:{type:Boolean}},setup(e){return(n,r)=>(j(),O("button",{disabled:e.disabled,class:Q(["flex justify-center items-center gap-3 px-4 py-2 rounded-lg transition font-semibold",{"border-2":e.outlined,"hover:bg-opacity-50":e.outlined&&!e.disabled,"bg-indigo-600 text-white":e.filled&&e.primary,"hover:bg-indigo-700":e.filled&&e.primary&&!e.disabled,"bg-orange-600 text-white":e.filled&&e.warning,"hover:bg-orange-700":e.filled&&e.warning&&!e.disabled,"bg-red-700 text-white":e.filled&&e.error,"hover:bg-red-800":e.filled&&e.error&&!e.disabled,"text-indigo-400 border-indigo-400":e.primary&&e.outlined,"hover:bg-indigo-900":e.primary&&!e.disabled,"text-orange-400 border-orange-400":e.warning&&e.outlined,"hover:bg-orange-900":e.warning&&!e.disabled,"text-red-500 border-red-500":e.error&&e.outlined,"hover:bg-red-900":e.error&&!e.disabled,"opacity-25 cursor-not-allowed":e.disabled}])},[F(n.$slots,"icon"),F(n.$slots,"default")],10,pe))}}),_e={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},be=u("path",{fill:"currentColor",d:"m23 12l-4-4v3h-9v2h9v3M1 18V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3h-2V6H3v12h12v-3h2v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2Z"},null,-1),ge=[be];function ye(e,n){return j(),O("svg",_e,ge)}var we={name:"mdi-export",render:ye};function h(e){return Object.prototype.toString.call(e)==="[object Array]"}function M(e,n){if(!e)throw new Error(n)}function D(e){return Object.keys(e)}function y(e){return Object.keys(e).map(function(n){return[n,e[n]]})}function b(e,n,r){var t="."+n,a=new RegExp("(\\".concat(n,")?$"));return r(e).replace(a,t)}function je(e){return"555xmlHello .  world!".trim().replace(/^([0-9,;]|(xml))+/,""),e.replace(/[^_a-zA-Z 0-9:\-\.]/g,"").replace(/^([ 0-9-:\-\.]|(xml))+/i,"").replace(/ +/g,"-")}function Oe(e){return Array(e+1).join(" ")}function Re(e){return e.replace(/([<>&])/g,function(n,r){switch(r){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return""}})}function Se(e,n,r){switch(n){case"txt":{var t="text/plain;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"css":{var t="text/css;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"html":{var t="text/html;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"json":{var t="text/json;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"csv":{var t="text/csv;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"xls":{var t="text/application/vnd.ms-excel;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}case"xml":{var t="text/application/xml;charset=utf-8";return r?URL.createObjectURL(new Blob([e],{type:t})):"data:,".concat(t)+encodeURIComponent(e)}default:return""}}function H(e,n,r,t){r===void 0&&(r="download"),t===void 0&&(t=!0);var a=Se(e,n,t),i=document.createElement("a");i.href=a,i.download=r,i.setAttribute("style","visibility:hidden"),document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!1,view:window})),document.body.removeChild(i)}var S=globalThis&&globalThis.__assign||function(){return S=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S.apply(this,arguments)},w=globalThis&&globalThis.__read||function(e,n){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var t=r.call(e),a,i=[],s;try{for(;(n===void 0||n-- >0)&&!(a=t.next()).done;)i.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(s)throw s.error}}return i};function Ne(e){if(!e||h(e)&&!e.length||!h(e)&&!D(e).length)return function(r){return r};var n=h(e)?e.reduce(function(r,t){var a;return S(S({},r),(a={},a[t]=t,a))},Object.create(null)):e;return function(r){return h(r)?r.map(function(t){return y(t).reduce(function(a,i){var s=w(i,2),l=s[0],o=s[1];return l in n&&(a[n[l]]=o),a},Object.create(null))}).filter(function(t){return D(t).length}):y(r).reduce(function(t,a){var i=w(a,2),s=i[0],l=i[1];return s in n&&(t[n[s]]=l),t},Object.create(null))}}function Le(e){var n="Invalid export data. Please provide a valid JSON";try{return typeof e=="string"?JSON.parse(e):e}catch{throw new Error(n)}}function Me(e,n,r){n===void 0&&(n=null);var t="Invalid export data. Please provide valid JSON object";try{return JSON.stringify(e,n,r)}catch{throw new Error(t)}}function P(e){return e.map(y).reduce(function(n,r,t){return r.reduce(function(a,i){var s=w(i,2),l=s[0],o=s[1],c=a[l]||Array.from({length:e.length}).map(function(d){return""});return c[t]=(typeof o!="string"?JSON.stringify(o):o)||"",a[l]=c,a},n)},Object.create(null))}function Y(e,n){return n===void 0&&(n=function(r){return r}),n(y(e).map(function(r){var t=w(r,2),a=t[0],i=t[1];return{fieldName:a,fieldValues:i}}))}function Ue(e,n,r){if(n===void 0&&(n=","),r===void 0&&(r=function(o){return o}),!e.length)return"";var t=P(e),a=Y(t,r),i=a.map(function(o){var c=o.fieldName;return c}).join(n)+`\r
`,s=a.map(function(o){var c=o.fieldValues;return c}).map(function(o){return o.map(function(c){return'"'.concat(c.replace(/\"/g,'""'),'"')})}),l=s.reduce(function(o,c){return o.map(function(d,f){return"".concat(d).concat(n).concat(c[f])})});return i+l.join(`\r
`)}function Ae(e,n){M(e.length>0);var r=P(e),t=Y(r,n),a=t.map(function(l){var o=l.fieldName;return o}).join("</b></th><th><b>"),i=t.map(function(l){var o=l.fieldValues;return o}).map(function(l){return l.map(function(o){return"<td>".concat(o,"</td>")})}),s=i.reduce(function(l,o){return l.map(function(c,d){return"".concat(c).concat(o[d])})});return`
    <table>
      <thead>
        <tr><th><b>`.concat(a,`</b></th></tr>
      </thead>
      <tbody>
        <tr>`).concat(s.join(`</tr>
        <tr>`),`</tr>
      </tbody>
    </table>
  `)}function Ce(e,n){if(n===void 0&&(n=function(t){return t}),!e.length)return"";var r=`<html>
  <head>
    <meta charset="UTF-8" />
  </head >
  <body>
    `.concat(Ae(e,n),`
  </body>
</html >
`);return r}function Ee(e){var n=`<?xml version="1.0" encoding="utf-8"?><!DOCTYPE base>
`.concat(U(e,"base"),`
`);return n}function U(e,n,r,t){r===void 0&&(r="element"),t===void 0&&(t=0);var a=je(n),i=Oe(t);if(e==null)return"".concat(i,"<").concat(a," />");var s=h(e)?e.map(function(o){return U(o,r,r,t+2)}).join(`
`):typeof e=="object"?y(e).map(function(o){var c=w(o,2),d=c[0],f=c[1];return U(f,d,r,t+2)}).join(`
`):i+"  "+Re(String(e)),l="".concat(i,"<").concat(a,`>
`).concat(s,`
`).concat(i,"</").concat(a,">");return l}var Ie={txt:"txt",css:"css",html:"html",json:"json",csv:"csv",xls:"xls",xml:"xml"};function A(e){var n=e.data,r=e.fileName,t=r===void 0?"download":r,a=e.extension,i=e.fileNameFormatter,s=i===void 0?function(L){return L.replace(/\s+/,"_")}:i,l=e.fields,o=e.exportType,c=o===void 0?"txt":o,d=e.replacer,f=d===void 0?null:d,p=e.space,N=p===void 0?4:p,R=e.processor,x=R===void 0?H:R,C=e.withBOM,X=C===void 0?!1:C,E=e.delimiter,z=E===void 0?",":E,I=e.beforeTableEncode,T=I===void 0?function(L){return L}:I,V="Invalid export data. Please provide an array of objects",Z="Can't export unknown data type ".concat(c,"."),W="Can't export string data to ".concat(c,".");if(typeof n=="string")switch(c){case"txt":case"css":case"html":return x(n,c,b(t,a!=null?a:c,s));default:throw new Error(W)}var K=Ne(l),_=K(Le(n)),B=Me(_,f,N);switch(c){case"txt":case"css":case"html":return x(B,c,b(t,a!=null?a:c,s));case"json":return x(B,c,b(t,a!=null?a:"json",s));case"csv":{M(h(_),V);var q="\uFEFF",$=Ue(_,z,T),g=X?q+$:$;return x(g,c,b(t,a!=null?a:"csv",s))}case"xls":{M(h(_),V);var g=Ce(_,T);return x(g,c,b(t,a!=null?a:"xls",s))}case"xml":{var g=Ee(_);return x(g,c,b(t,a!=null?a:"xml",s))}default:throw new Error(Z)}}A.types=Ie;A.processors={downloadFile:H};const Te={class:"space-y-8 max-w-screen-md mx-auto"},Ve={class:"text-2xl font-semibold flex items-center gap-4"},Be=u("span",null,"Game",-1),$e={class:"grid grid-cols-1 gap-8"},Fe=u("h2",{class:"text-xl"},"Export Game",-1),ke=u("p",null,"Export and download the game to your computer.",-1),De={class:"flex justify-end"},Ge=J(" Export "),Je=u("h2",{class:"text-xl"},"Import Game",-1),He=u("p",null," Load an exported game from you local computer. The current game data will be overwritten. This action cannot be undone! ",-1),Pe={class:"flex justify-end"},Ye=u("span",null,"Import",-1),Xe=u("h2",{class:"text-2xl font-semibold"},"Restart Game",-1),ze=u("p",null,"All game data will be lost. This action cannot be undone!",-1),Ze={class:"flex justify-end"},We=J(" Restart "),et=G({setup(e){const n=()=>{const l=te(oe.state.value);A({data:l,fileName:`save-${Date.now()}.json`,exportType:"json"})},r=re(),t=k(),a=k(),i=l=>{const o=l.target;o.files&&(t.value=o.files[0])},s=()=>{if(!confirm("Your current save game will be overwritten. Are you sure you want to load this save game?"))return;const o=new FileReader;o.onload=c=>{const{target:d}=c;if(d==null?void 0:d.result){const f=JSON.parse(d.result.toString());r.loadGame(f),a.value&&a.value.reset()}},o.readAsText(t.value)};return(l,o)=>{const c=ae,d=we,f=xe,p=ne,N=he,R=ue;return j(),O("div",Te,[u("h1",Ve,[v(c),Be]),u("div",$e,[v(p,{class:"px-8 py-6 space-y-6"},{default:m(()=>[Fe,ke,u("div",De,[v(f,{onClick:n,primary:"",filled:""},{icon:m(()=>[v(d)]),default:m(()=>[Ge]),_:1})])]),_:1}),v(p,{class:"px-8 py-6 space-y-6"},{default:m(()=>[Je,u("form",{ref_key:"fileInputForm",ref:a,class:"space-y-4",action:""},[He,u("input",{type:"file",onChange:i,accept:"application/JSON",ref:"fileUpload"},null,544),u("div",Pe,[v(f,{onClick:s,disabled:!t.value,error:"",filled:""},{icon:m(()=>[v(N)]),default:m(()=>[Ye]),_:1},8,["disabled"])])],512)]),_:1}),v(p,{class:"px-8 py-6 space-y-6"},{default:m(()=>[Xe,ze,u("div",Ze,[v(f,{onClick:ee(r).resetGame,error:"",filled:""},{icon:m(()=>[v(R)]),default:m(()=>[We]),_:1},8,["onClick"])])]),_:1})])])}}});export{et as default};
